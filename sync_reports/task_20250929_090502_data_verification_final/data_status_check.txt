# PC28 数据同步状态检查报告
生成时间: 2025-09-29 09:05:02

## 1. 本地数据库状态检查

### 1.1 核心表记录数量统计
- lab_push_candidates_v2: 50 条记录
- cloud_pred_today_norm: 40 条记录  
- signal_pool_union_v3: 30 条记录
- p_size_clean_merged_dedup_v: 4 条记录
- draws_14w_dedup_v: 60 条记录
- score_ledger: 45 条记录

总计: 229 条记录

### 1.2 表结构验证
所有核心表均存在于本地 SQLite 数据库中，表结构完整。

## 2. Supabase 远程表状态检查

### 2.1 远程表记录数量统计
- lab_push_candidates_v2: 0 条记录 ❌
- cloud_pred_today_norm: 0 条记录 ❌
- signal_pool_union_v3: 0 条记录 ❌
- p_size_clean_merged_dedup_v: 0 条记录 ❌
- draws_14w_dedup_v: 0 条记录 ❌
- score_ledger: 0 条记录 ❌

总计: 0 条记录

### 2.2 表结构修复状态
已成功应用表结构修复 SQL，添加了缺失的列字段。

## 3. 数据同步状态分析

### 3.1 同步执行结果
- 同步模式: 全量同步 (full)
- 执行时间: 2025-09-29T09:03:50 - 2025-09-29T09:04:00
- 持续时间: 9.27 秒
- 成功表数: 6/6
- 失败表数: 0/6
- 报告同步记录数: 229 条

### 3.2 关键问题识别
尽管同步管理器报告成功同步了 229 条记录，但 Supabase 远程表中实际记录数为 0。

## 4. 错误分析

### 4.1 主要错误类型
1. **列不存在错误**: 多个表出现 "Could not find the 'xxx' column" 错误
2. **JSON 序列化错误**: datetime 对象无法序列化为 JSON
3. **表结构不匹配**: 本地 SQLite 表结构与 Supabase 表结构不一致

### 4.2 具体错误示例
- lab_push_candidates_v2: 缺少 'algorithm_version' 列
- score_ledger: 缺少 'created_at' 列
- draws_14w_dedup_v: datetime 对象序列化失败

## 5. 数据完整性状态

### 5.1 本地数据完整性
✅ 本地数据库数据完整，所有表均包含预期数据

### 5.2 远程数据完整性  
❌ 远程数据库完全为空，数据传输失败

### 5.3 同步一致性
❌ 本地与远程数据严重不一致，同步机制存在根本性问题

## 6. 结论

数据同步系统存在严重问题：
1. 表结构不匹配导致数据插入失败
2. 数据类型转换问题阻止数据传输
3. 同步状态报告不准确，掩盖了实际失败情况

需要进一步修复表结构匹配和数据类型转换问题。